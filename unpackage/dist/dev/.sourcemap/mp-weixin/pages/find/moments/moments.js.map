{"version":3,"sources":["uni-app:///main.js","webpack:////Users/jhq/WeChatProjects/weixinApp/pages/find/moments/moments.nvue?07d8","webpack:////Users/jhq/WeChatProjects/weixinApp/pages/find/moments/moments.nvue?16ad","webpack:////Users/jhq/WeChatProjects/weixinApp/pages/find/moments/moments.nvue?6d25","webpack:////Users/jhq/WeChatProjects/weixinApp/pages/find/moments/moments.nvue?ab24","uni-app:///pages/find/moments/moments.nvue","webpack:////Users/jhq/WeChatProjects/weixinApp/pages/find/moments/moments.nvue?1705","webpack:////Users/jhq/WeChatProjects/weixinApp/pages/find/moments/moments.nvue?5885"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"pages/find/moments/moments.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/find/moments/moments.nvue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./moments.nvue?vue&type=template&id=362ef064&\"\nvar renderjs\nimport script from \"./moments.nvue?vue&type=script&lang=js&\"\nexport * from \"./moments.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./moments.nvue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/find/moments/moments.nvue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./moments.nvue?vue&type=template&id=362ef064&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.focusState = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./moments.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./moments.nvue?vue&type=script&lang=js&\"","<style>\n  view,\n  label,\n  swiper-item,\n  scroll-view {\n    display:flex;\n    flex-direction:column;\n    flex-shrink: 0;\n    flex-grow: 0;\n    flex-basis: auto;\n    align-items: stretch;\n    align-content: flex-start;\n  }\n  view,\n  image,\n  input,\n  scroll-view,\n  swiper,\n  swiper-item,\n  text,\n  textarea,\n  video {\n    position: relative;\n    border: 0px solid #000000;\n    box-sizing: border-box;\n  }\n  swiper-item {\n    position: absolute;\n  }\n  button {\n    margin: 0;\n  }\n</style>\n<template>\r\n\t<view>\r\n\t\t<free-transparent-bar @clickRight='clickRight' title=\"朋友圈\" :scrollTop='scrollTop'></free-transparent-bar>\r\n\t\t<view v-if=\"!show\"\r\n\t\t\tclass=\"position-fixed top-0 bottom-0 left-0 right-0 bg-light flex justify-center align-center\">\r\n\t\t\t<text class=\"text-muted font\">正在加载...</text>\r\n\t\t</view>\r\n\t\t<view class=\"position-relative\" style=\"height: 640rpx;\">\r\n\t\t\t<image src=\"/static/images/bgmoment.jpg\" mode=\"aspectFill\" class=\"bg-chat w-100\"\r\n\t\t\t\tstyle=\"height: 595rpx;\"></image>\r\n\t\t\t<image @click='openUser' :src=\"avatar\" style=\"width:120rpx ;height: 120rpx;right: 30rpx;\"\r\n\t\t\t\tclass=\"bg-secondary rounded position-absolute bottom-0\" mode=\"\"></image>\r\n\t\t\t<text class=\"font-md text-white position-absolute\" style=\"bottom: 60rpx;right: 160rpx;\">{{nickname}}</text>\r\n\t\t</view>\r\n\t\t<view style=\"height: 120rpx;\">\r\n\r\n\t\t</view>\r\n\t\t<view @click=\"readMoments\" v-if=\"notice.num\" class=\"flex align-start justify-center\" style=\"height: 200rpx;\">\r\n\t\t\t<view class=\"rounded flex align-center justify-between p-1\" style=\"height: 80rpx;width: 290rpx;background-color: #5c5c5c;\">\r\n\t\t\t\t<free-avater :src=\"notice.avatar?notice.avatar:'/static/images/userpic.png'\" size=\"60\">\r\n\t\t\t\t</free-avater>\n\t\t\t\t<view class=\"flex flex-1 justify-center\">\n\t\t\t\t\t<text class=\"font-md  text-white\">{{notice.num}}条新消息</text>\n\t\t\t\t</view>\n\t\t\t\t\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 朋友圈列表样式 -->\r\n\t\t<free-moment-list v-for=\"(item,index) in list\" :key='index' :index=\"index\" :item=\"item\" @reply='replyEvent'\r\n\t\t\t@action='doAction'>\r\n\t\t</free-moment-list>\r\n\t\t<!-- 评论框 -->\r\n\t\t<free-popup ref='action' fixedBottom transformOrigin='center bottom'>\r\n\t\t\t<view class=\"border-bottom flex px-3 bg-light align-center\" style=\"height: 105rpx;\">\r\n\t\t\t\t<textarea @blur=\"focusState = false\" @click='focus' :focus='focusState' v-model=\"content\" fixed\r\n\t\t\t\t\tclass=\"bg-white flex flex-1 rounded px-2 p-1 mr-1 font-md\" :adjust-position='false'\r\n\t\t\t\t\tstyle=\" height: 75rpx;\" />\r\n\r\n\t\t\t\t<!-- 表情 -->\r\n\t\t\t\t<free-icon-button @click=\"changeFaceModal\" iconfontSize='font-max' :icon=\"faceModal?'\\ue608':'\\ue605'\">\r\n\t\t\t\t</free-icon-button>\r\n\t\t\t\t<!-- 发送按钮 -->\r\n\t\t\t\t<view @click=\"send\" :class=\"content.length===0?'bg-light border-2 border-secondary':'main-bg-color'\"\r\n\t\t\t\t\tclass=\"ml-1 px-2 flex align-center py-1 rounded\" style=\" white-space: nowrap;height: 65rpx;\">\r\n\t\t\t\t\t<text class=\"font\" :class=\"content.length===0?'text-light-muted':'text-white'\">发送</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 表情 -->\r\n\t\t\t<scroll-view scroll-y=\"true\" :style=\"getKeyboardHeight\" class=\"bg-light\">\r\n\t\t\t\t<view v-if=\"faceModal\" class=\"flex flex-wrap\">\r\n\t\t\t\t\t<view style=\"width: 107rpx;height: 107rpx;\" class=\"flex align-center rounded-2 justify-center\"\r\n\t\t\t\t\t\thover-stay-time='50' hover-start-time='0' hover-class=\"bg-hover-light\"\r\n\t\t\t\t\t\tv-for=\"(item,index) in faceList\" :key=\"index\" @click=\"addFace(item)\">\r\n\t\t\t\t\t\t<text>{{item}}</text>\r\n\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</free-popup>\r\n\t\t<!-- 上拉加载  -->\r\n\t\t<view v-if=\"list.length>=10\" class=\"flex align-center justify-center bg-white py-4\">\r\n\t\t\t<text v-if=\"loadmore!==''\" class=\"text-light-muted font-small\">{{loadmore}}</text>\r\n\t\t\t<view v-else class=\"flex align-center justify-center\">\r\n\t\t\t\t<view class=\"bg-light\" style=\"height: 3rpx;width: 250rpx;\"></view>\r\n\t\t\t\t<text class=\"font-lg text-light-muted\"> · </text>\r\n\t\t\t\t<view class=\"bg-light\" style=\"height: 3rpx;width: 250rpx;\"></view>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapState\r\n\t} from \"vuex\"\r\n\timport $H from \"@/common/free-lib/request.js\"\n\timport freeAvater from \"@/components/free-ui/free-avater.vue\"\r\n\timport freeIconButton from \"@/components/free-ui/free-icon-button.vue\"\r\n\timport freePopup from \"@/components/free-ui/free-popup.vue\"\r\n\timport freeMomentList from \"@/components/free-ui/free-moment-list.vue\"\r\n\timport freeTransparentBar from \"@/components/free-ui/free-transparent-bar.vue\"\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcontent: '',\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t\tlist: [],\r\n\t\t\t\tfaceList: [\"😀\", \"😁\", \"😂\", \"😃\", \"😄\", \"😅\", \"😆\", \"😉\", \"😊\", \"😋\", \"😎\", \"😍\", \"😘\", \"😗\",\r\n\t\t\t\t\t\"😙\", \"😚\", \"😇\", \"😐\", \"😑\", \"😶\", \"😏\", \"😣\", \"😥\", \"😮\", \"😯\", \"😪\", \"😫\", \"😴\",\r\n\t\t\t\t\t\"😌\", \"😛\", \"😜\", \"😝\", \"😒\", \"😓\", \"😔\", \"😕\", \"😲\", \"😷\", \"😖\", \"😞\", \"😟\", \"😤\",\r\n\t\t\t\t\t\"😢\", \"😭\", \"😦\", \"😧\", \"😨\", \"😬\", \"😰\", \"😱\", \"😳\", \"😵\", \"😡\", \"😠\"\r\n\t\t\t\t],\r\n\t\t\t\tfaceModal: false,\r\n\t\t\t\t// 评论对象\r\n\t\t\t\tcommentindex: -1,\r\n\r\n\t\t\t\t//键盘高度\r\n\t\t\t\tKeyHeight: 0,\r\n\t\t\t\tKeyboardHeight: 0,\r\n\t\t\t\t// 键盘焦点\r\n\t\t\t\tfocusState: true,\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tloadmore: \"上拉加载更多\",\r\n\t\t\t\tkey: \"moment_timeline\",\r\n\t\t\t\treply_user: false,\r\n\t\t\t\tshow: false,\r\n\t\t\t\tparams: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tonPageScroll(e) {\r\n\t\t\tthis.scrollTop = e.scrollTop\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tfreeTransparentBar,\r\n\t\t\tfreeMomentList,\r\n\t\t\tfreePopup,\r\n\t\t\tfreeIconButton,\n\t\t\tfreeAvater\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.getData()\r\n\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tif (e.key) {\r\n\t\t\t\tthis.key = e.key\r\n\t\t\t}\r\n\t\t\tif (e.params) {\r\n\t\t\t\tthis.params = JSON.parse(decodeURIComponent(e.params))\r\n\t\t\t}\r\n\r\n\t\t\tthis.page = 1\r\n\t\t\tuni.$on('momentNotice', this.momentNotice)\n\t\t\t// console.log(this.notice)\r\n\t\t\treturn this.show = true\r\n\t\t},\r\n\t\tdestroyed() {\r\n\t\t\tuni.$off('momentNotice', this.momentNotice)\r\n\t\t},\r\n\t\t//下拉刷新\r\n\t\tonPullDownRefresh() {\r\n\t\t\tthis.page = 1\r\n\t\t\tthis.getData().then(res => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"刷新成功\",\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\tuni.stopPullDownRefresh()\r\n\t\t\t}).catch(err => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '刷新失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\tuni.stopPullDownRefresh()\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 上拉加载\r\n\t\tonReachBottom() {\r\n\t\t\tif (this.loadmore !== '上拉加载更多') {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.page += 1\r\n\t\t\tthis.loadmore = '加载中...'\r\n\t\t\tthis.getData().catch(err => {\r\n\t\t\t\tthis.page -= 1\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '加载失败',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\tthis.loadmore = '上拉加载更多'\r\n\t\t\t})\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// 监听键盘高度\r\n\t\t\tuni.onKeyboardHeightChange(res => {\r\n\t\t\t\tthis.KeyHeight = res.height\r\n\t\t\t\tif (this.KeyboardHeight === 0) {\r\n\t\t\t\t\tthis.KeyboardHeight = res.height\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tuser: state => state.user.user,\r\n\t\t\t\tnotice: state => state.user.notice,\n\t\t\t\tchat:state=>state.user.chat\r\n\t\t\t}),\r\n\t\t\tnickname() {\r\n\t\t\t\tif (!this.params) {\r\n\t\t\t\t\treturn this.user.nickname || this.user.username\r\n\t\t\t\t}\r\n\t\t\t\treturn this.params.name\r\n\t\t\t},\r\n\t\t\tavatar() {\r\n\t\t\t\tlet avatar = ''\r\n\t\t\t\tavatar = !this.params ? this.user.avatar : this.params.avatar\r\n\r\n\t\t\t\treturn avatar = avatar || '/static/images/userpic.png'\r\n\t\t\t},\r\n\t\t\tgetKeyboardHeight() {\r\n\t\t\t\t// #ifdef APP-PLUS-NVUE\r\n\t\t\t\treturn this.KeyboardHeight ? `height:${this.KeyboardHeight}px;` : 'height:550rpx;'\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (this.faceModal) {\r\n\t\t\t\t\treturn 'height:350rpx;'\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\n\t\t\t// 读取朋友圈\n\t\t\treadMoments(){\n\t\t\t\t// uni.navigateTo({\n\t\t\t\t// \turl:'../../find/momentnum/momentnum?notice='+JSON.stringify(this.notice)\n\t\t\t\t// })\n\t\t\tthis.chat.readMoments() \t\n\t\t\t},\r\n\t\t\topenUser() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/pages/mail/user-base/user-base?user_id=\" + this.user.id\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tmomentNotice() {\n\t\t\t\t\r\n\t\t\t\tthis.getData()\r\n\t\t\t},\r\n\t\t\t// 回复评论\r\n\t\t\treplyEvent(e) {\r\n\t\t\t\tthis.content = ''\r\n\t\t\t\tthis.faceModal = false\r\n\t\t\t\tthis.commentindex = e.index\r\n\t\t\t\tthis.reply_user = e.reply\r\n\t\t\t\tthis.$refs.action.show()\r\n\t\t\t},\r\n\t\t\tgetData() {\r\n\r\n\t\t\t\treturn new Promise((result, reject) => {\r\n\t\t\t\t\tlet page = this.page\r\n\t\t\t\t\tlet param = ''\r\n\t\t\t\t\tif (this.params && this.key == 'moment') {\r\n\t\t\t\t\t\tparam = '?user_id=' + this.params.id\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$H.get(`/${this.key}/${this.page}${param}`).then(res => {\r\n\t\t\t\t\t\tlet page = this.page\r\n\t\t\t\t\t\tthis.list = page === 1 ? res : [...this.list, ...res],\r\n\t\t\t\t\t\t\tthis.loadmore = this.list.length === (page * 10) ? '上拉加载更多' :\r\n\t\t\t\t\t\t\t''\r\n\t\t\t\t\t}).then(res => {\r\n\r\n\t\t\t\t\t\tresult(res)\r\n\t\t\t\t\t}).catch(err => {\r\n\r\n\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 点击操作菜单\r\n\t\t\tdoAction(e) {\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\titemList: ['点赞', '评论'],\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.tapIndex === 0) {\r\n\t\t\t\t\t\t\tthis.doSupport(e)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.content = ''\r\n\t\t\t\t\t\t\tthis.faceModal = false\r\n\t\t\t\t\t\t\tthis.focusState = true\r\n\t\t\t\t\t\t\tthis.commentindex = e.index\r\n\t\t\t\t\t\t\tthis.$refs.action.show()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 点赞\r\n\t\t\tdoSupport(e) {\r\n\t\t\t\t$H.post('/moment/like', {\r\n\t\t\t\t\tid: e.item.moment_id\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tlet i = e.item.likes.findIndex(item => item.id === this.user.id)\r\n\t\t\t\t\tif (i !== -1) {\r\n\t\t\t\t\t\t// 取消点赞\r\n\t\t\t\t\t\te.item.likes.splice(i, 1)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 点赞\r\n\t\t\t\t\t\te.item.likes.push({\r\n\t\t\t\t\t\t\tid: this.user.id,\r\n\t\t\t\t\t\t\tname: this.user.nickname || this.user.username\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: i !== -1 ? '取消点赞成功' : '点赞成功',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t// 添加表情\r\n\t\t\taddFace(item) {\r\n\t\t\t\tthis.content += item\r\n\t\t\t},\r\n\t\t\t// 开启或关闭表情包面板\r\n\t\t\tchangeFaceModal() {\r\n\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.faceModal = !this.faceModal\r\n\r\n\t\t\t\t}, 100)\r\n\t\t\t\tif (!this.faceModal) {\r\n\t\t\t\t\tuni.hideKeyboard()\r\n\r\n\t\t\t\t\tthis.focusState = false\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.focusState = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 发送\r\n\t\t\tsend() {\r\n\t\t\t\tlet item = this.list[this.commentindex]\r\n\t\t\t\t$H.post('/moment/comment', {\r\n\t\t\t\t\tid: item.moment_id,\r\n\t\t\t\t\tcontent: this.content,\r\n\t\t\t\t\treply_id: this.reply_user ? this.reply_user.id : 0\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\titem.comments.push({\r\n\t\t\t\t\t\tcontent: this.content,\r\n\t\t\t\t\t\tuser: {\r\n\t\t\t\t\t\t\tid: this.user.id,\r\n\t\t\t\t\t\t\tname: this.user.nickname || this.user.username\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\treply: this.reply ? this.reply : null\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '评论成功',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tthis.$refs.action.hide()\r\n\t\t\t},\r\n\t\t\tfocus() {\r\n\t\t\t\tthis.faceModal = false\r\n\t\t\t},\r\n\t\t\t// 选择发表朋友圈类型\r\n\t\t\tclickRight() {\r\n\t\t\t\tlet list = [{\r\n\t\t\t\t\t\tname: '图文',\r\n\t\t\t\t\t\tkey: 'image'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '短视频',\r\n\t\t\t\t\t\tkey: 'video'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '文字',\r\n\t\t\t\t\t\tkey: 'content'\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\titemList: list.map(v => v.name),\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '../add-moment/add-moment?type=' + list[res.tapIndex].key\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./moments.nvue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./moments.nvue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1655376689768\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}